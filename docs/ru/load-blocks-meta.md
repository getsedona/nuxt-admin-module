# Загрузка метаинформации блоков

## Общее

Метаинформация блока это информация необходимая для панели администрирования. Но не необязательная. Если ее не удалось найти, парсер разберет компонент и построит свою метамодель.

## Из чего состоит метамодель блока

Метаинформация блока это обект реализующий интерфейс `BlockMeta`.

* **title** – название блока. Выводится в палитре блоков. Если поле не заполнено будет использовано имя каомпонента
* **description** – описание блока. Выводится под названием блока в палитре. Необязательное поле
* **icon** – иконка блока. Выводится в палитре блоков. По умолчанию значение `extension`
* **group** – группа блока. Используется для разбивки блоков на группы в палитре. По умолчанию `general`
* **props** - описание пропсов блока. Используется для построеения интерфейса редактирования блока

```ts
export interface BlockMeta {
  title?: string
  description?: string
  icon?: string // default is 'extension'
  group?: string // default is 'general'
  props?: {
    [key: string]: BlockProp
  }
}
```

## Где хранить метаинформацию блоков

Существует несколько вариантов зависящих от структуры директорий блоков, типов файлов и предпочтений:

  1. Во vue файле, в специальной секции `block`
  2. Рядом с файлом блока, в json файле. Например `<имя-файла-блока>.block.json`

Для удобства заполнения информации используется json схемы.

Для простоты разработки, на первых этапах можно не подготавливать никакой метаинформации. Просто делать блоки-компоненты и все. Информация соберется сама на основе парснга компонентов.

## Как происходит загрузка метаинформации блоков

Все блоки должны находиться в директории `~/components/blocks`

  1. если блок это vue компонент, то загрузчик метаинформации попробует найти `block` секцию
  2. если секции `block` нет в файле, то загрузчик попробует найти файл `<имя-файла-блока>.block.json` и загрузить его
  3. если отдельного файла нет, загрузчик распарсит компонент и соберет информацию из него
